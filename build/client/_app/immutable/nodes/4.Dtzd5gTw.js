import"../chunks/DsnmJJEf.js";import{o as we,q as pa,z as ve,v as J,w as ha,J as ya,k as c,Y as _a,M as ba,O as xa,P as Pe,y as me,A as ie,C as ga,aR as wa,a5 as ka,a9 as ke,ab as Aa,aT as Ea,au as Ce,aP as je,ai as Sa,aY as $e,a6 as ea,a8 as Ta,aZ as aa,a_ as Ma,a$ as pe,x as Pa,b0 as Ca,b1 as za,aO as Ha,a7 as La,aC as ze,b2 as ta,I as Na,b3 as Wa,B as ra,h as Da,av as Ua,l as Ia,b4 as Oa,p as Ra,f as B,s as R,a as j,t as V,b as z,c as Fa,d as G,b5 as qa,$ as Ba,r as U,aW as H,aX as oe,aV as He,S as Le}from"../chunks/B64TLU0q.js";import{c as Ga,o as Ja,d as Va,e as Ya,s as $}from"../chunks/YwOi7tgn.js";import{p as Ka,i as X}from"../chunks/C4t6inGP.js";import{h as Qa}from"../chunks/Dv9qz4E3.js";import{s as he,r as Xa,a as Ne}from"../chunks/BBb_aQc1.js";import{t as Za,c as ja}from"../chunks/BRzKQYUk.js";import{i as $a,a as et,b as at,c as tt}from"../chunks/BX0c1fD1.js";import{r as rt}from"../chunks/BeJcinlA.js";function st(e,a){return a}function nt(e,a,r){for(var u=[],n=a.length,i=0;i<n;i++)Ca(a[i].e,u,!0);za(u,()=>{var s=u.length===0&&r!==null;if(s){var m=r,o=m.parentNode;Ha(o),o.append(m),e.items.clear(),q(e,a[0].prev,a[n-1].next)}for(var x=0;x<n;x++){var y=a[x];s||(e.items.delete(y.k),q(e,y.prev,y.next)),La(y.e,!s)}e.first===a[0]&&(e.first=a[0].prev)})}function le(e,a,r,u,n,i=null){var s=e,m=new Map,o=null,x=(a&ta)!==0,y=(a&aa)!==0,T=(a&$e)!==0;if(x){var g=e;s=J?ve(ha(g)):g.appendChild(we())}J&&ya();var v=null,k=_a(()=>{var d=r();return Sa(d)?d:d==null?[]:je(d)}),S,l=!0;function _(){it(b,S,s,a,u),v!==null&&(S.length===0?(v.fragment?(s.before(v.fragment),v.fragment=null):ea(v.effect),I.first=v.effect):Ta(v.effect,()=>{v=null}))}var I=pa(()=>{S=c(k);var d=S.length;let M=!1;if(J){var C=ba(s)===xa;C!==(d===0)&&(s=Pe(),ve(s),me(!1),M=!0)}for(var p=new Set,t=ka,f=null,w=Aa(),A=0;A<d;A+=1){J&&ie.nodeType===ga&&ie.data===wa&&(s=ie,M=!0,me(!1));var P=S[A],E=u(P,A),h=l?null:m.get(E);h?(y&&ze(h.v,P),T?ze(h.i,A):h.i=A,w&&t.skipped_effects.delete(h.e)):(h=ot(l?s:null,f,P,E,A,n,a,r),l&&(h.o=!0,f===null?o=h:f.next=h,f=h),m.set(E,h)),p.add(E)}if(d===0&&i&&!v)if(l)v={fragment:null,effect:ke(()=>i(s))};else{var N=document.createDocumentFragment(),L=we();N.append(L),v={fragment:N,effect:ke(()=>i(L))}}if(J&&d>0&&ve(Pe()),!l)if(w){for(const[D,O]of m)p.has(D)||t.skipped_effects.add(O.e);t.oncommit(_),t.ondiscard(()=>{})}else _();M&&me(!0),c(k)}),b={effect:I,items:m,first:o};l=!1,J&&(s=ie)}function it(e,a,r,u,n){var i=(u&Wa)!==0,s=a.length,m=e.items,o=e.first,x,y=null,T,g=[],v=[],k,S,l,_;if(i)for(_=0;_<s;_+=1)k=a[_],S=n(k,_),l=m.get(S),l.a?.measure(),(T??=new Set).add(l);for(_=0;_<s;_+=1){if(k=a[_],S=n(k,_),l=m.get(S),e.first??=l,!l.o){l.o=!0;var I=y?y.next:o;q(e,y,l),q(e,l,I),ye(l,I,r),y=l,g=[],v=[],o=y.next;continue}if((l.e.f&pe)!==0&&(ea(l.e),i&&(l.a?.unfix(),(T??=new Set).delete(l))),l!==o){if(x!==void 0&&x.has(l)){if(g.length<v.length){var b=v[0],d;y=b.prev;var M=g[0],C=g[g.length-1];for(d=0;d<g.length;d+=1)ye(g[d],b,r);for(d=0;d<v.length;d+=1)x.delete(v[d]);q(e,M.prev,C.next),q(e,y,M),q(e,C,b),o=b,y=C,_-=1,g=[],v=[]}else x.delete(l),ye(l,o,r),q(e,l.prev,l.next),q(e,l,y===null?e.first:y.next),q(e,y,l),y=l;continue}for(g=[],v=[];o!==null&&o.k!==S;)(o.e.f&pe)===0&&(x??=new Set).add(o),v.push(o),o=o.next;if(o===null)continue;l=o}g.push(l),y=l,o=l.next}if(o!==null||x!==void 0){for(var p=x===void 0?[]:je(x);o!==null;)(o.e.f&pe)===0&&p.push(o),o=o.next;var t=p.length;if(t>0){var f=(u&ta)!==0&&s===0?r:null;if(i){for(_=0;_<t;_+=1)p[_].a?.measure();for(_=0;_<t;_+=1)p[_].a?.fix()}nt(e,p,f)}}i&&Na(()=>{if(T!==void 0)for(l of T)l.a?.apply()})}function ot(e,a,r,u,n,i,s,m){var o=(s&aa)!==0,x=(s&Ma)===0,y=o?x?Ea(r,!1,!1):Ce(r):r,T=(s&$e)===0?n:Ce(n),g={i:T,v:y,k:u,a:null,e:null,o:!1,prev:a,next:null};try{if(e===null){var v=document.createDocumentFragment();v.append(e=we())}return g.e=ke(()=>i(e,y,T,m)),a!==null&&(a.next=g),g}finally{}}function ye(e,a,r){for(var u=e.next?e.next.e.nodes_start:r,n=a?a.e.nodes_start:r,i=e.e.nodes_start;i!==null&&i!==u;){var s=Pa(i);n.before(i),i=s}}function q(e,a,r){a===null?(e.first=r,e.effect.first=r&&r.e):(a.e.next&&(a.e.next.prev=null),a.next=r,a.e.next=r&&r.e),r===null?e.effect.last=a&&a.e:(r.e.prev&&(r.e.prev.next=null),r.prev=a,r.e.prev=a&&a.e)}function We(e,a,r){ra(()=>{var u=Da(()=>a(e,r?.())||{});if(r&&u?.update){var n=!1,i={};Ua(()=>{var s=r();Ia(s),n&&Oa(i,s)&&(i=s,u.update(s))}),n=!0}if(u?.destroy)return()=>u.destroy()})}function ee(e,a,r,u,n,i){var s=e.__className;if(J||s!==r||s===void 0){var m=Za(r,u,i);(!J||m!==e.getAttribute("class"))&&(m==null?e.removeAttribute("class"):e.className=m),e.__className=r}else if(i&&n!==i)for(var o in i){var x=!!i[o];(n==null||x!==!!n[o])&&e.classList.toggle(o,x)}return i}class lt{#e;#a;constructor(a,r){this.#e=a,this.#a=Ga(r)}get current(){return this.#a(),this.#e()}}const ct=/\(.+\)/,ft=new Set(["all","print","screen","and","or","not","only"]);class dt extends lt{constructor(a,r){let u=ct.test(a)||a.split(/[\s,]+/).some(i=>ft.has(i.trim()))?a:`(${a})`;const n=window.matchMedia(u);super(()=>n.matches,i=>Ja(n,"change",i))}}function ut(e){const a=JSON.parse(e);return a.data&&(a.data=at(a.data,tt.decoders)),a}function _e(e){return HTMLElement.prototype.cloneNode.call(e)}function vt(e,a=()=>{}){const r=async({action:n,result:i,reset:s=!0,invalidateAll:m=!0})=>{i.type==="success"&&(s&&HTMLFormElement.prototype.reset.call(e),m&&await $a()),(location.origin+location.pathname===n.origin+n.pathname||i.type==="redirect"||i.type==="error")&&await et(i)};async function u(n){if((n.submitter?.hasAttribute("formmethod")?n.submitter.formMethod:_e(e).method)!=="post")return;n.preventDefault();const s=new URL(n.submitter?.hasAttribute("formaction")?n.submitter.formAction:_e(e).action),m=n.submitter?.hasAttribute("formenctype")?n.submitter.formEnctype:_e(e).enctype,o=new FormData(e,n.submitter),x=new AbortController;let y=!1;const g=await a({action:s,cancel:()=>y=!0,controller:x,formData:o,formElement:e,submitter:n.submitter})??r;if(y)return;let v;try{const k=new Headers({accept:"application/json","x-sveltekit-action":"true"});m!=="multipart/form-data"&&k.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(m)?m:"application/x-www-form-urlencoded");const S=m==="multipart/form-data"?o:new URLSearchParams(o),l=await fetch(s,{method:"POST",headers:k,cache:"no-store",body:S,signal:x.signal});v=ut(await l.text()),v.type==="error"&&(v.status=l.status)}catch(k){if(k?.name==="AbortError")return;v={type:"error",error:k}}await g({action:s,formData:o,formElement:e,update:k=>r({action:s,result:v,reset:k?.reset,invalidateAll:k?.invalidateAll}),result:v})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",u),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",u)}}}var De="mz3PUW_p",Ue=["#FFC700","#FF0000","#2E3191","#41BBC7"],Ie=3500,Oe=.5,Re=150,Fe="mix",qe=12,Be="",Ge=!0,Je=800,Ve=1600;function mt(e,a={}){let{colors:r=Ue,duration:u=Ie,force:n=Oe,particleCount:i=Re,particleShape:s=Fe,particleSize:m=qe,particleClass:o=Be,destroyAfterDone:x=Ge,stageHeight:y=Je,stageWidth:T=Ve}=a;(function(b){if(document.querySelector("style[data-neoconfetti]"))return;const d=be("style");d.dataset.neoconfetti="",d.textContent=b,xe(document.head,d)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),e.classList.add("mz3PUW_c"),e.style.setProperty("--sh",y+"px");let g=[],v=[];const k=()=>ae(F()*(bt-1)),S=(b,d)=>s!=="rectangles"&&(b==="circles"||xt(d));function l(b,d){const M=k(),C=S(s,M),p=(w,A)=>b.style.setProperty(w,A+"");p("--xlp",ge(ce(Xe(d,90)-180),0,180,-T/2,T/2)+"px"),p("--dc",u-ae(1e3*F())+"ms");const t=F()<ht?Z(F()*yt,2):0;p("--x1",t),p("--x2",-1*t),p("--x3",t),p("--x4",Z(ce(ge(ce(Xe(d,90)-180),0,180,-1,1)),4)),p("--y1",Z(F()*Ke,4)),p("--y2",Z(F()*n*(sa()?1:-1),4)),p("--y3",Ke),p("--y4",Z(_t(ge(ce(d-180),0,180,n,-n),0),4)),p("--w",(C?m:ae(4*F())+m/2)+"px"),p("--h",(C?m:ae(2*F())+m)+"px");const f=M.toString(2).padStart(3,"0").split("");p("--hr",f.map((w=>+w/2+"")).join(" ")),p("--r",f.join(" ")),p("--rd",Z(F()*(pt-Ye)+Ye)+"ms"),p("--br",C?"50%":0)}let _;function I(){e.innerHTML="",clearTimeout(_),g=Qe(i,r),v=(function(b,d=[],M){const C=[];for(const{color:p}of d){const t=be("div");t.className=`${De} ${M}`,t.style.setProperty("--bgc",p);const f=be("div");xe(t,f),xe(b,t),C.push(t)}return C})(e,g,o);for(const[b,d]of Ze(v))l(d,g[+b].degree);_=setTimeout((()=>{x&&(e.innerHTML="")}),u)}return I(),{update(b){const d=b.particleCount??Re,M=b.particleShape??Fe,C=b.particleSize??qe,p=b.particleClass??Be,t=b.colors??Ue,f=b.stageHeight??Je,w=b.duration??Ie,A=b.force??Oe,P=b.stageWidth??Ve,E=b.destroyAfterDone??Ge;g=Qe(d,t);let h=!1;if(d===i){v=Array.from(e.querySelectorAll(`.${De}`));for(const[N,{color:L}]of Ze(g)){const D=v[+N];JSON.stringify(r)!==JSON.stringify(t)&&D.style.setProperty("--bgc",L),M!==s&&D.style.setProperty("--br",S(M,k())?"50%":"0"),p!==o&&(o&&D.classList.remove(o),p&&D.classList.add(p))}}else h=!0;x&&!E&&clearTimeout(_),e.style.setProperty("--sh",f+"px"),u=w,r=t,n=A,i=d,s=M,m=C,o=p,x=E,y=f,T=P,h&&I()},destroy(){e.innerHTML="",clearTimeout(_)}}}var Ye=200,pt=800,ht=.1,yt=.3,Ke=.5,ce=Math.abs,F=Math.random,ae=Math.round,_t=Math.max,be=e=>document.createElement(e),xe=(e,a)=>e.appendChild(a),Qe=(e,a)=>Array.from({length:e},((r,u)=>({color:a[u%a.length],degree:360*u/e}))),Z=(e,a=2)=>ae((e+Number.EPSILON)*10**a)/10**a,ge=(e,a,r,u,n)=>(e-a)*(n-u)/(r-a)+u,Xe=(e,a)=>e+a>360?e+a-360:e+a,sa=()=>F()>.5,Ze=Object.entries,bt=6,xt=e=>e!==1&&sa(),gt=B('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-115oxdy"/>'),wt=B('<div> <span class="visually-hidden svelte-115oxdy"><!></span> <input name="guess" type="hidden" class="svelte-115oxdy"/></div>'),kt=B('<h2 class="visually-hidden svelte-115oxdy"> </h2> <div></div>',1),At=B('<p class="svelte-115oxdy"> </p>'),Et=B('<!> <button data-key="enter" class="restart selected svelte-115oxdy" formaction="?/restart"> </button>',1),St=B('<button formaction="?/update" name="key"> </button>'),Tt=B('<div class="row svelte-115oxdy"></div>'),Mt=B('<div class="keyboard svelte-115oxdy"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-115oxdy">back</button> <!></div>'),Pt=B('<div style="position: absolute; left: 50%; top: 30%" class="svelte-115oxdy"></div>'),Ct=B('<h1 class="visually-hidden svelte-115oxdy">Sverdle</h1> <form method="post" action="?/enter" class="svelte-115oxdy"><a class="how-to-play svelte-115oxdy">How to play</a> <div></div> <div class="controls svelte-115oxdy"><!></div></form> <!>',1);function Rt(e,a){Ra(a,!0);let r=Ka(a,"form",15);const u=new dt("(prefers-reduced-motion: reduce)");let n=H(()=>a.data.answers.at(-1)==="xxxxx"),i=H(()=>c(n)?-1:a.data.answers.length),s=H(()=>a.data.guesses[c(i)]||""),m=H(()=>c(s).length===5);const o=H(()=>{let t={},f={};return a.data.answers.forEach((w,A)=>{const P=a.data.guesses[A];for(let E=0;E<5;E+=1){const h=P[E];w[E]==="x"?(t[h]="exact",f[h]="correct"):t[h]||(t[h]=w[E]==="c"?"close":"missing",f[h]=w[E]==="c"?"present":"absent")}}),{classnames:t,description:f}}),x=H(()=>c(o).classnames),y=H(()=>c(o).description);function T(t){t.preventDefault();const f=t.target.getAttribute("data-key");f==="backspace"?(Le(s,c(s).slice(0,-1)),r()?.badGuess&&r(r().badGuess=!1,!0)):c(s).length<5&&Le(s,c(s)+f)}function g(t){t.metaKey||t.key==="Enter"&&!c(m)||document.querySelector(`[data-key="${t.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var v=Ct();Ya("keydown",qa,g),Qa("115oxdy",t=>{var f=gt();ra(()=>{Ba.title="Sverdle"}),z(t,f)});var k=R(j(v),2),S=G(k),l=R(S,2);let _;le(l,20,()=>Array.from(Array(6).keys()),t=>t,(t,f)=>{const w=H(()=>f===c(i));var A=kt(),P=j(A),E=G(P);U(P);var h=R(P,2);let N;le(h,20,()=>Array.from(Array(5).keys()),L=>L,(L,D)=>{const O=H(()=>c(w)?c(s):a.data.guesses[f]),W=H(()=>a.data.answers[f]?.[D]),te=H(()=>c(O)?.[D]??""),na=H(()=>c(w)&&D===c(O).length),Ae=H(()=>c(W)==="x"),Ee=H(()=>c(W)==="c"),Se=H(()=>c(W)==="_");var re=wt();let Te;var Me=G(re),fe=R(Me),ia=G(fe);{var oa=Y=>{var se=oe("(correct)");z(Y,se)},la=Y=>{var se=He(),ca=j(se);{var fa=K=>{var ne=oe("(present)");z(K,ne)},da=K=>{var ne=He(),ua=j(ne);{var va=Q=>{var ue=oe("(absent)");z(Q,ue)},ma=Q=>{var ue=oe("empty");z(Q,ue)};X(ua,Q=>{c(Se)?Q(va):Q(ma,!1)},!0)}z(K,ne)};X(ca,K=>{c(Ee)?K(fa):K(da,!1)},!0)}z(Y,se)};X(ia,Y=>{c(Ae)?Y(oa):Y(la,!1)})}U(fe);var de=R(fe,2);Xa(de),U(re),V(()=>{Te=ee(re,1,"letter svelte-115oxdy",null,Te,{exact:c(Ae),close:c(Ee),missing:c(Se),selected:c(na)}),$(Me,`${c(te)??""} `),de.disabled=!c(w),Ne(de,c(te))}),z(L,re)}),U(h),V(()=>{$(E,`Row ${f+1}`),N=ee(h,1,"row svelte-115oxdy",null,N,{current:c(w)})}),z(t,A)}),U(l);var I=R(l,2),b=G(I);{var d=t=>{var f=Et(),w=j(f);{var A=h=>{var N=At(),L=G(N);U(N),V(()=>$(L,`the answer was "${a.data.answer??""}"`)),z(h,N)};X(w,h=>{!c(n)&&a.data.answer&&h(A)})}var P=R(w,2),E=G(P);U(P),V(()=>$(E,`${c(n)?"you won :)":"game over :("} play again?`)),z(t,f)},M=t=>{var f=Mt(),w=G(f);let A;var P=R(w,2);P.__click=T;var E=R(P,2);le(E,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],h=>h,(h,N)=>{var L=Tt();le(L,21,()=>N,st,(D,O)=>{var W=St();W.__click=T;var te=G(W,!0);U(W),V(()=>{he(W,"data-key",c(O)),ee(W,1,ja(c(x)[c(O)]),"svelte-115oxdy"),W.disabled=c(m),Ne(W,c(O)),he(W,"aria-label",`${c(O)??""} ${(c(y)[c(O)]||"")??""}`),$(te,c(O))}),z(D,W)}),U(L),z(h,L)}),U(f),V(()=>{w.disabled=!c(m),A=ee(w,1,"svelte-115oxdy",null,A,{selected:c(m)})}),z(t,f)};X(b,t=>{c(n)||a.data.answers.length>=6?t(d):t(M,!1)})}U(I),U(k),We(k,(t,f)=>vt?.(t,f),()=>()=>({update:t})=>{t({reset:!1})});var C=R(k,2);{var p=t=>{var f=Pt();We(f,(w,A)=>mt?.(w,A),()=>({particleCount:u.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),z(t,f)};X(C,t=>{c(n)&&t(p)})}V(t=>{he(S,"href",t),_=ee(l,1,"grid svelte-115oxdy",null,_,{playing:!c(n),"bad-guess":r()?.badGuess})},[()=>rt("/sverdle/how-to-play")]),z(e,v),Fa()}Va(["click"]);export{Rt as component};
